<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Scheda Interattiva - Componenti PC</title>
    <style>
        /* Stili per Chiarezza e Contrasto */
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #F0F8FF; /* Azzurro chiaro */
            color: #333;
        }
        .container {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #4B0082; /* Viola Scuro */
            text-align: center;
            font-size: 36px;
            margin-bottom: 10px;
        }
        h2 {
            color: #FF8C00; /* Arancione Brillante */
            border-bottom: 4px solid #FF8C00;
            padding-bottom: 8px;
            margin-top: 40px;
            font-size: 28px;
        }
        h3 {
             color: #1E90FF; /* Blu Chiaro */
             font-size: 22px;
             margin-top: 20px;
        }
        
        .sezione {
            margin: 30px 0;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #ddd;
        }
        .livello-1 { background: #E6F7E6; border-color: #38A852; } /* Verde - Facile */
        .livello-2 { background: #FFF3E0; border-color: #FF8C00; } /* Giallo/Arancio - Medio */
        .livello-3 { background: #F8E6F7; border-color: #8A2BE2; } /* Viola - Difficile */
        
        /* Pulsanti e Interazione */
        .option-button, .match-item {
            display: inline-block;
            padding: 15px 25px;
            margin: 8px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.2s;
            text-align: center;
            border: 3px solid;
            user-select: none; /* Rende il testo non selezionabile */
        }
        .option-button:hover, .match-item:hover {
            transform: scale(1.05);
        }
        
        /* Colori per le opzioni */
        .option-button[data-q='1'], .option-button[data-q='6'], .option-button[data-q='11'] {
            background: #90EE90; border-color: #3CB371; /* Verde */
        }
        .option-button[data-q='2'], .option-button[data-q='7'], .option-button[data-q='12'] {
            background: #ADD8E6; border-color: #4682B4; /* Blu */
        }
        .option-button[data-q='3'], .option-button[data-q='8'], .option-button[data-q='13'] {
            background: #FFB6C1; border-color: #FA8072; /* Rosa */
        }
        .option-button[data-q='4'], .option-button[data-q='9'], .option-button[data-q='14'] {
            background: #FFE4B5; border-color: #FFD700; /* Giallo */
        }
        .option-button[data-q='5'], .option-button[data-q='10'], .option-button[data-q='15'] {
            background: #DDA0DD; border-color: #9932CC; /* Viola */
        }

        .selected {
            box-shadow: 0 0 0 5px #00BFFF; /* Contorno azzurro vivo quando selezionato */
        }
        .correct { background: #32CD32 !important; color: white; border-color: #228B22 !important; }
        .incorrect { background: #FF4500 !important; color: white; border-color: #B22222 !important; }
        
        /* Feedback */
        .feedback {
            padding: 10px;
            margin-top: 10px;
            border-radius: 8px;
            font-weight: bold;
            display: block; 
            text-align: center;
            font-size: 16px;
        }
        .feedback.success { background: #E6F7E6; color: #38A852; border: 2px solid #38A852; }
        .feedback.error { background: #FDE6E6; color: #FF4500; border: 2px solid #FF4500; }

        /* Pulsanti Reset e Istruzioni */
        .btn-reset {
            display: block;
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: #4682B4; /* Blu Acciaio */
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-reset:hover { background: #3A6690; }

        .istruzioni {
            background: #F0F8FF;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 16px;
            border: 1px solid #ADD8E6;
        }

        /* Stili Gioco Associazione (Livello 2) */
        .match-container {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 15px;
            padding: 10px;
            border: 2px dashed #FF8C00;
            border-radius: 10px;
        }
        .match-col {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 45%;
        }
        .match-item {
            border: 3px solid #FF8C00;
            background: #FFFACD;
        }
        .drop-target {
            min-height: 50px;
            border: 4px dashed #9932CC;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #E6E6FA; /* Lavanda */
            margin-top: 5px;
            font-weight: bold;
            color: #8A2BE2;
            font-size: 16px;
        }
        .drop-target.correct-match { border: 4px solid #32CD32; background: #E6F7E6; color: #38A852; }
        
        /* Stili Gioco Classificazione (Livello 3) */
        .classification-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .classification-card {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            border: 3px solid #8A2BE2;
            background: #F8E6F7;
        }
        .classification-card.selected {
            box-shadow: 0 0 0 5px #FFD700;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üíª I COMPONENTI DEL COMPUTER: LA SUPER SFIDA</h1>
        <p style="text-align: center; font-size: 20px;">Clicca, abbina e impara con 15 mini-giochi!</p>
        
        <div style="text-align: center; margin-top: 10px;">
            <button class="btn-reset" onclick="resetAll()">üîÑ Azzera Tutti i Giochi</button>
        </div>

        <div class="sezione livello-1" data-level="1">
            <h2>üü¢ Livello 1: Riconoscimento Semplice (5 Giochi)</h2>
            <div class="istruzioni">
                **Istruzioni:** Clicca sul nome che corrisponde all'azione principale del componente.
            </div>
            
            <h3>1. L'Azione di "Guardare" üëÄ</h3>
            <div id="q1" data-answer="MONITOR" data-score="0">
                <p>Quale componente mi permette di **VEDERE** le cose sullo schermo?</p>
                <span class="option-button" data-q="1" onclick="checkAnswer(this, 'MONITOR', 1)">MONITOR</span>
                <span class="option-button" data-q="1" onclick="checkAnswer(this, 'TASTIERA', 1)">TASTIERA</span>
                <span class="option-button" data-q="1" onclick="checkAnswer(this, 'MOUSE', 1)">MOUSE</span>
                <div class="feedback" id="f1"></div>
            </div>

            <h3>2. L'Azione di "Scrivere" ‚úçÔ∏è</h3>
            <div id="q2" data-answer="TASTIERA" data-score="0">
                <p>Quale componente uso per **SCRIVERE** le lettere e i numeri?</p>
                <span class="option-button" data-q="2" onclick="checkAnswer(this, 'MOUSE', 2)">MOUSE</span>
                <span class="option-button" data-q="2" onclick="checkAnswer(this, 'TASTIERA', 2)">TASTIERA</span>
                <span class="option-button" data-q="2" onclick="checkAnswer(this, 'STAMPANTE', 2)">STAMPANTE</span>
                <div class="feedback" id="f2"></div>
            </div>

            <h3>3. L'Azione di "Puntare" üëâ</h3>
            <div id="q3" data-answer="MOUSE" data-score="0">
                <p>Quale componente muovo sul tavolo per **PUNTARE** e cliccare sullo schermo?</p>
                <span class="option-button" data-q="3" onclick="checkAnswer(this, 'CASE', 3)">CASE</span>
                <span class="option-button" data-q="3" onclick="checkAnswer(this, 'MONITOR', 3)">MONITOR</span>
                <span class="option-button" data-q="3" onclick="checkAnswer(this, 'MOUSE', 3)">MOUSE</span>
                <div class="feedback" id="f3"></div>
            </div>

            <h3>4. L'Azione di "Stampare" üìÑ</h3>
            <div id="q4" data-answer="STAMPANTE" data-score="0">
                <p>Quale componente fa uscire un disegno o un testo sulla **CARTA**?</p>
                <span class="option-button" data-q="4" onclick="checkAnswer(this, 'CASSE', 4)">CASSE</span>
                <span class="option-button" data-q="4" onclick="checkAnswer(this, 'STAMPANTE', 4)">STAMPANTE</span>
                <span class="option-button" data-q="4" onclick="checkAnswer(this, 'MONITOR', 4)">MONITOR</span>
                <div class="feedback" id="f4"></div>
            </div>
            
            <h3>5. L'Azione di "Sentire" üëÇ</h3>
            <div id="q5" data-answer="CASSE AUDIO" data-score="0">
                <p>Quale componente fa uscire la **MUSICA** e i suoni?</p>
                <span class="option-button" data-q="5" onclick="checkAnswer(this, 'CASSE AUDIO', 5)">CASSE AUDIO</span>
                <span class="option-button" data-q="5" onclick="checkAnswer(this, 'TASTIERA', 5)">TASTIERA</span>
                <span class="option-button" data-q="5" onclick="checkAnswer(this, 'MICROFONO', 5)">MICROFONO</span>
                <div class="feedback" id="f5"></div>
            </div>
        </div>

        <div class="sezione livello-2" data-level="2">
            <h2>üü° Livello 2: Abbina Componente + Funzione (5 Giochi)</h2>
            <div class="istruzioni">
                **Istruzioni:** Clicca su un componente a sinistra, poi clicca sulla sua funzione a destra. I due pulsanti abbinati si bloccheranno.
            </div>
            
            <div class="match-container" id="match-container-2">
                <div class="match-col" id="col-comp">
                    <div class="match-item" data-match="CPU" data-type="comp" onclick="selectMatch(this, 2)">CPU (Cervello)</div>
                    <div class="match-item" data-match="CASE" data-type="comp" onclick="selectMatch(this, 2)">CASE (Scatola)</div>
                    <div class="match-item" data-match="WEBCAM" data-type="comp" onclick="selectMatch(this, 2)">WEBCAM</div>
                    <div class="match-item" data-match="MICROFONO" data-type="comp" onclick="selectMatch(this, 2)">MICROFONO</div>
                    <div class="match-item" data-match="CAVO ALIMENTAZIONE" data-type="comp" onclick="selectMatch(this, 2)">CAVO ALIMENTAZIONE</div>
                </div>
                <div class="match-col" id="col-func">
                    <div class="match-item" data-match="FARE I CALCOLI" data-type="func" onclick="selectMatch(this, 2)">FARE I CALCOLI</div>
                    <div class="match-item" data-match="CONTENERE I PEZZI" data-type="func" onclick="selectMatch(this, 2)">CONTENERE I PEZZI</div>
                    <div class="match-item" data-match="REGISTRARE VIDEO" data-type="func" onclick="selectMatch(this, 2)">REGISTRARE VIDEO</div>
                    <div class="match-item" data-match="REGISTRARE VOCE" data-type="func" onclick="selectMatch(this, 2)">REGISTRARE VOCE</div>
                    <div class="match-item" data-match="PORTARE ENERGIA" data-type="func" onclick="selectMatch(this, 2)">PORTARE ENERGIA</div>
                </div>
            </div>
             <div class="feedback" id="f_match_2"></div>
        </div>

        <div class="sezione livello-3" data-level="3">
            <h2>üü£ Livello 3: Input/Output e Hardware/Software (5 Giochi)</h2>
            <div class="istruzioni">
                **Istruzioni:** Clicca sul componente e poi clicca sulla categoria giusta (INPUT o OUTPUT).
            </div>
            
            <div class="classification-grid" id="classification-grid-3">
                
                <div class="classification-card" data-comp="TASTIERA" data-correct-cat="INPUT" data-q="11" onclick="selectClassification(this, 'INPUT')">TASTIERA</div>
                <div class="classification-card" data-comp="MONITOR" data-correct-cat="OUTPUT" data-q="12" onclick="selectClassification(this, 'OUTPUT')">MONITOR</div>
                <div class="classification-card" data-comp="MOUSE" data-correct-cat="INPUT" data-q="13" onclick="selectClassification(this, 'INPUT')">MOUSE</div>
                <div class="classification-card" data-comp="STAMPANTE" data-correct-cat="OUTPUT" data-q="14" onclick="selectClassification(this, 'OUTPUT')">STAMPANTE</div>
                <div class="classification-card" data-comp="MICROFONO" data-correct-cat="INPUT" data-q="15" onclick="selectClassification(this, 'INPUT')">MICROFONO</div>
            </div>

            <h3 style="text-align: center;">Scegli la Categoria:</h3>
            <div style="text-align: center; margin-top: 10px;">
                <span class="option-button" data-q="11" data-cat="INPUT" onclick="classifyComponent('INPUT', 3)">üîµ INPUT (Entra nel computer)</span>
                <span class="option-button" data-q="11" data-cat="OUTPUT" onclick="classifyComponent('OUTPUT', 3)">üî¥ OUTPUT (Esce dal computer)</span>
            </div>
            <div class="feedback" id="f_class_3"></div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn-reset" onclick="resetAll()">üîÑ AZZERA TUTTO E RICOMINCIA</button>
        </div>
    </div>

    <script>
        let score = 0;
        let selectedMatch = { comp: null, func: null };
        const correctMatchesL2 = {
            "CPU": "FARE I CALCOLI",
            "CASE": "CONTENERE I PEZZI",
            "WEBCAM": "REGISTRARE VIDEO",
            "MICROFONO": "REGISTRARE VOCE",
            "CAVO ALIMENTAZIONE": "PORTARE ENERGIA"
        };
        let matchesMadeL2 = {};
        let selectedClassificationCard = null;

        // ==============================================
        // Funzione Generale: Check Semplice (Livello 1)
        // ==============================================
        function checkAnswer(element, answer, qNum) {
            const parent = element.closest('div');
            const feedback = document.getElementById(`f${qNum}`);
            const correctAnswer = parent.getAttribute('data-answer');

            // Se l'attivit√† √® gi√† stata completata correttamente, non fare nulla
            if (parent.dataset.score === '1') return;

            // Rimuovi selezione e colori da tutti i pulsanti della domanda
            parent.querySelectorAll('.option-button').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            element.classList.add('selected');

            if (answer === correctAnswer) {
                element.classList.add('correct');
                feedback.className = 'feedback success';
                feedback.textContent = '‚úÖ CORRETTO! Bravo!';
                
                // Aggiorna punteggio solo se non era stato risposto prima
                if (parent.dataset.score === '0') {
                    score++;
                    parent.dataset.score = '1';
                }
            } else {
                element.classList.add('incorrect');
                feedback.className = 'feedback error';
                feedback.textContent = '‚ùå Riprova! Clicca sul pulsante giusto.';
            }
        }

        // ==============================================
        // Funzione Generale: Reset Semplice (Livello 1)
        // ==============================================
        function resetActivityL1() {
            for (let i = 1; i <= 5; i++) {
                const parent = document.getElementById(`q${i}`);
                if (parent) {
                    parent.querySelectorAll('.option-button').forEach(opt => opt.classList.remove('selected', 'correct', 'incorrect'));
                    document.getElementById(`f${i}`).textContent = '';
                    parent.dataset.score = '0';
                }
            }
        }

        // ==============================================
        // Logica Match (Livello 2)
        // ==============================================
        function selectMatch(element, level) {
            if (element.classList.contains('used')) return;

            const type = element.getAttribute('data-type');
            
            // 1. Deseleziona gli elementi precedenti dello stesso tipo
            document.querySelectorAll(`.match-item[data-type="${type}"]`).forEach(item => item.classList.remove('selected'));
            
            element.classList.add('selected');

            // 2. Tieni traccia dell'elemento selezionato
            if (type === 'comp') {
                selectedMatch.comp = element;
            } else {
                selectedMatch.func = element;
            }

            // 3. Controlla se abbiamo entrambi gli elementi selezionati
            if (selectedMatch.comp && selectedMatch.func) {
                const compName = selectedMatch.comp.getAttribute('data-match');
                const funcName = selectedMatch.func.getAttribute('data-match');

                let isCorrect = false;

                // Controllo per Livello 2
                if (level === 2 && correctMatchesL2[compName] === funcName) {
                    isCorrect = true;
                }

                const feedback = document.getElementById(`f_match_${level}`);

                if (isCorrect) {
                    // Blocca e colora di verde
                    selectedMatch.comp.classList.add('used', 'correct');
                    selectedMatch.func.classList.add('used', 'correct');
                    selectedMatch.comp.onclick = null; // Disabilita
                    selectedMatch.func.onclick = null; // Disabilita
                    
                    matchesMadeL2[compName] = funcName; // Registra il match
                    
                    feedback.className = 'feedback success';
                    feedback.textContent = `‚úÖ Abbinamento corretto: ${compName} fa ${funcName}!`;
                    
                    // Se tutti sono abbinati, aggiorna il punteggio una volta sola
                    if (Object.keys(matchesMadeL2).length === 5) {
                        const parent = document.querySelector(`.sezione[data-level='${level}']`);
                         if (parent.dataset.score === '0' || !parent.dataset.score) {
                            score++;
                            parent.dataset.score = '1';
                         }
                         feedback.textContent = 'üéâ COMPLIMENTO! Hai abbinato tutti e 5 i componenti!';
                    }
                    
                } else {
                    // Colora di rosso e resetta
                    selectedMatch.comp.classList.add('incorrect');
                    selectedMatch.func.classList.add('incorrect');
                    
                    feedback.className = 'feedback error';
                    feedback.textContent = `‚ùå Abbinamento sbagliato! Riprova, pensa alla funzione principale.`;
                    
                    // Rimuovi colori dopo un breve timeout
                    setTimeout(() => {
                        selectedMatch.comp.classList.remove('incorrect');
                        selectedMatch.func.classList.remove('incorrect');
                    }, 800);
                }

                // Reset della selezione per il prossimo match
                selectedMatch.comp.classList.remove('selected');
                selectedMatch.func.classList.remove('selected');
                selectedMatch = { comp: null, func: null };
            }
        }

        // ==============================================
        // Logica Classificazione (Livello 3)
        // ==============================================
        function selectClassification(card) {
             if (card.classList.contains('correct')) return; // Gi√† corretto
             
             // Deseleziona le altre carte
             document.querySelectorAll('.classification-card').forEach(c => c.classList.remove('selected'));
             card.classList.add('selected');
             selectedClassificationCard = card;
             
             document.getElementById('f_class_3').textContent = 'Ora scegli INPUT o OUTPUT qui sotto üëá';
             document.getElementById('f_class_3').className = 'feedback';
        }

        function classifyComponent(category, level) {
            const feedback = document.getElementById(`f_class_${level}`);

            if (!selectedClassificationCard) {
                feedback.className = 'feedback error';
                feedback.textContent = '‚ùå Devi prima CLICCARE su un componente nella griglia in alto!';
                return;
            }
            
            const card = selectedClassificationCard;
            const correctAnswer = card.getAttribute('data-correct-cat');

            if (category === correctAnswer) {
                card.classList.add('correct');
                card.classList.remove('selected');
                card.onclick = null; // Blocca il pulsante
                
                // Aggiorna punteggio se la risposta non era stata registrata
                if (card.dataset.score !== '1') {
                    score++;
                    card.dataset.score = '1';
                }

                feedback.className = 'feedback success';
                feedback.textContent = `‚úÖ CORRETTO! ${card.textContent} √® ${category}.`;
                
                // Controlla se tutti e 5 sono corretti
                const allCorrect = Array.from(document.querySelectorAll('.classification-card')).every(c => c.classList.contains('correct'));
                if (allCorrect) {
                     feedback.textContent = 'üéâ Finito! Hai classificato tutti i componenti!';
                     document.querySelector(`.sezione[data-level='${level}']`).dataset.score = '1';
                }
            } else {
                card.classList.add('incorrect');
                feedback.className = 'feedback error';
                feedback.textContent = `‚ùå ${category} non √® giusto per ${card.textContent}. Riprova! Ricorda: entra (INPUT), esce (OUTPUT).`;
                setTimeout(() => {
                    card.classList.remove('incorrect');
                }, 800);
            }
            
            selectedClassificationCard = null; // Resetta la selezione dopo aver tentato
        }

        // ==============================================
        // Funzione Generale: Reset Totale
        // ==============================================
        function resetAll() {
            // Reset Livello 1 (5 Giochi)
            resetActivityL1();

            // Reset Livello 2 (5 Giochi)
            document.querySelectorAll('.match-item').forEach(item => {
                item.classList.remove('selected', 'used', 'correct', 'incorrect');
                item.onclick = (e) => selectMatch(item, 2); // Riassegna l'onClick
            });
            document.getElementById('f_match_2').textContent = '';
            matchesMadeL2 = {};
            selectedMatch = { comp: null, func: null };
            
            // Reset Livello 3 (5 Giochi)
            document.querySelectorAll('.classification-card').forEach(card => {
                card.classList.remove('selected', 'correct', 'incorrect');
                card.onclick = (e) => selectClassification(card); // Riassegna l'onClick
                card.dataset.score = '0';
            });
            document.getElementById('f_class_3').textContent = '';
            selectedClassificationCard = null;

            // Reset Punteggio Totale
            score = 0;
            document.querySelectorAll('.sezione').forEach(s => s.dataset.score = '0');
            alert("‚ú® Scheda Azzerata! Puoi ricominciare da capo. Buon divertimento! ‚ú®");
        }

        // Inizializzazione (Assicura che il punteggio sia 0 all'inizio)
        document.addEventListener('DOMContentLoaded', () => {
             document.querySelectorAll('.sezione').forEach(s => s.dataset.score = '0');
             document.querySelectorAll('[data-score]').forEach(q => q.dataset.score = '0');
        });
    </script>
</body>
</html>